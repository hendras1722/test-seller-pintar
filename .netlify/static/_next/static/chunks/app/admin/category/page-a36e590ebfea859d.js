(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{965:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2334:(e,t,a)=>{"use strict";a.d(t,{sg:()=>r});let r=({delay:e},t)=>{let a,r=!0,s=(...s)=>{r?(clearTimeout(a),a=setTimeout(()=>{r&&t(...s),a=void 0},e)):t(...s)};return s.isPending=()=>void 0!==a,s.cancel=()=>{r=!1},s.flush=(...e)=>t(...e),s}},3158:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3561:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},5074:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},5943:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},7223:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7828:(e,t,a)=>{Promise.resolve().then(a.bind(a,8908))},8908:(e,t,a)=>{"use strict";a.d(t,{default:()=>N});var r=a(5155),s=a(2115),l=a(4856),i=a(7634),n=a(2523),c=a(285),d=a(5943),o=a(7223),m=a(5074),u=a(2334),h=a(6936),g=a(221),x=a(5594),b=a(2177),y=a(1022),p=a(7824),v=a(1068),j=a(5937),f=a(9688),w=a(2405),k=a(9755);let A=x.z.object({name:x.z.string().min(2,{message:"Category must be at least 3 characters."})});function N(e){var t;let{category:a}=e,[x,N]=s.useState({data:[],totalData:0,currentPage:0,totalPages:0}),[C,E]=s.useState({page:1,limit:10,search:""}),[S,P]=s.useState(!1),[z,D]=s.useState({isEdit:!1,data:{}}),M=(0,p.q)();(0,s.useEffect)(()=>{S||V.reset()},[S]);let _=[{label:"Category Id",key:"id"},{label:"title",key:"name"},{label:"Actions",key:"actions",render:e=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.$,{className:"bg-blue-500 mr-5",onClick:()=>{var t;return t=e,void(V.setValue("name",t.name),D({isEdit:!0,data:t}),P(!0))},children:[" ",(0,r.jsx)(d.A,{}),"Edit"]})," ",(0,r.jsxs)(c.$,{className:"bg-red-500",onClick:()=>O(e.id),children:[" ",(0,r.jsx)(o.A,{}),"Delete"]})]})}];function L(e){(0,h.p)({...C,page:null!=e?e:C.page}).then(e=>{N(e)})}(0,s.useEffect)(()=>{x.data.length?L():N(a)},[C]);let O=async e=>{let{error:t}=await M("/categories/"+e,{method:"DELETE"});if(!t){await (0,v.me)({variant:"success",title:"Success",description:"Category deleted successfully",duration:3e3,className:"border border-green-500 bg-white text-green-800"}),L();return}await (0,v.me)({variant:"error",title:"Error",description:null==t?void 0:t.message,duration:3e3,className:"border border-red-500 bg-white text-red-800"})},T=(0,u.sg)({delay:500},async e=>{E(()=>({limit:10,page:1,search:e.target.value}));try{let t=await (0,h.p)({...C,search:e.target.value});N(t)}catch(t){E(()=>({limit:10,page:1,search:e.target.value})),N(t=>({...t,data:t.data.filter(t=>t.name.toLowerCase().includes(e.target.value.toLowerCase()))}))}}),V=(0,b.mN)({resolver:(0,g.u)(A),defaultValues:{name:""}});async function $(e){if(z.isEdit){let{error:t}=await (0,h.H)(e,z.data.id);if(!t){await (0,v.me)({variant:"success",title:"Success",description:"Category has been updated",duration:3e3,className:"border border-green-500 bg-white text-green-800"}),P(!1),L(),V.reset(),D({isEdit:!1,data:{}});return}await (0,v.me)({variant:"error",title:"Error",description:null==t?void 0:t.message,duration:3e3,className:"border border-red-500 bg-white text-red-800"});return}let{error:t}=await M("/categories",{method:"POST",body:e});if(!t){await (0,v.me)({variant:"success",title:"Success",description:"Category created successfully",duration:3e3,className:"border border-green-500 bg-white text-green-800"}),P(!1),L(),V.reset();return}await (0,v.me)({variant:"error",title:"Error",description:null==t?void 0:t.message,duration:3e3,className:"border border-red-500 bg-white text-red-800"})}return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(l.A,{items:[{label:"Dashboard",href:"",disabled:!0},{label:"Category",href:"/admin/category"}]}),(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsxs)("div",{className:"sm:flex gap-4 items-center mb-5",children:[(0,r.jsxs)("div",{className:"relative w-full",children:[(0,r.jsx)(n.p,{onChange:T,className:"pl-10 w-full"}),(0,r.jsx)(m.A,{className:"absolute top-0 left-2 w-5 translate-y-1 text-gray-400"})]}),(0,r.jsxs)(y.A,{open:S,onOpenChange:P,title:"Add Category",children:[(0,r.jsx)(y.A.ButtonModal,{children:(0,r.jsx)(c.$,{className:"bg-blue-500",children:"Add Category"})}),(0,r.jsx)(y.A.Description,{children:(0,r.jsx)("div",{children:(0,r.jsx)(j.lV,{...V,children:(0,r.jsx)("form",{id:"my-form",children:(0,r.jsx)(j.zB,{control:V.control,name:"name",render:e=>{var t,a;let{field:s,formState:l}=e;return(0,r.jsxs)(j.eI,{children:[(0,r.jsx)(j.lR,{children:"name"}),(0,r.jsx)(j.MJ,{children:(0,r.jsx)(n.p,{className:(0,f.QP)(V.formState.errors.name&&"border border-red-500 "),placeholder:"name",...s})}),(0,r.jsx)(w.If,{condition:!!(null==(t=l.errors.name)?void 0:t.message),children:(0,r.jsx)(j.C5,{className:"text-red-500",children:null==(a=V.formState.errors.name)?void 0:a.message})})]})}})})})})}),(0,r.jsx)(y.A.Footer,{children:(0,r.jsxs)("div",{className:" w-full grid place-items-center",children:[(0,r.jsx)(c.$,{color:"green",type:"submit",className:"w-full bg-green-500 mt-3 hover:bg-green-700 shadow-none",onClick:V.handleSubmit($),children:"Submit"}),(0,r.jsx)(c.$,{className:"bg-blue-500 mt-3 bg-transparent text-black hover:bg-transparent shadow-none",onClick:()=>P(!1),children:"close"})]})})]})]}),(0,r.jsx)(i.O,{fields:_,items:x.data||[]}),(0,r.jsx)("div",{className:"mt-5",children:(0,r.jsx)(s.Suspense,{children:(0,r.jsx)(k.A,{page:C.page,setParams:E,pageSize:null!=(t=C.limit)?t:10,totalCount:x.totalData})})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[625,136,870,375,494,441,684,358],()=>t(7828)),_N_E=e.O()}]);